import{a as e,c as t}from"./index.5638c92a.js";import{I as o}from"./vendor.ad595088.js";const n=["T-shirt/top","Trouser","Pullover","Dress","Coat","Sandal","Shirt","Sneaker","Bag","Ankle boot"],r=["#FFFF00","#1CE6FF","#FF34FF","#FF4A46","#008941","#006FA6","#A30059","#FFDBE5","#7A4900","#0000A6"],a=fetch("https://storage.googleapis.com/flekschas/regl-scatterplot/fashion-mnist-embeddings.arrow"),s=document.querySelector("#modal"),c=document.querySelector("#modal span"),l=(e,t)=>{s.style.display="flex",c.style.color=t?"#cc79A7":"#bbb",c.textContent=e};l("Loading...");document.querySelector("#footer").classList.remove("hidden");document.querySelector("#info-content").innerHTML='\n<p><a href="https://github.com/zalandoresearch/fashion-mnist" target="_blank">Fashion MNIST</a> embedding using four different techniques: PCA, t-SNE, UMAP, and a convolutional autoencoder.</p>\n<p> Select a point so see the corresponding image.</p>\n';const i=document.querySelector("#parent-wrapper"),d=document.createElement("div");d.id="note",d.style.opacity=0,i.appendChild(d);const p=()=>{d.style.opacity=0},u=document.createElement("div");u.id="center-note",u.style.opacity=0;const m=document.createElement("div");m.style.width="56px",m.style.height="56px",m.style.backgroundColor="black",m.style.backgroundSize="cover",m.style.backgroundRepeat="no-repeat",u.appendChild(m),i.appendChild(u);const y=(e,t)=>{const o=new Image;var n;const a=`https://storage.googleapis.com/flekschas/regl-scatterplot/fashion-mnist-images/${n=5,String(e).padStart(n,"0")}.png`;o.onload=()=>{u.style.opacity=1,u.style.transform="translate(-50%, -50%) scale(1)",m.style.backgroundImage=`url("${a}")`,u.style.background=r[t]},o.src=a};i.style.display="grid",i.style.gridTemplateColumns="repeat(2, minmax(0, 1fr))",i.style.gridTemplateRows="repeat(2, minmax(0, 1fr))",i.style.gap="1rem";const h=document.querySelector("#canvas"),g=document.querySelector("#canvas-wrapper");g.style.position="relative";const v=[h];for(let M=0;M<3;M++){const e=h.cloneNode(),t=g.cloneNode();t.appendChild(e),i.appendChild(t),v.push(e)}const f=document.querySelector("#num-points"),b=document.querySelector("#num-points-value"),S=document.querySelector("#point-size"),E=document.querySelector("#point-size-value"),q=document.querySelector("#opacity"),k=document.querySelector("#opacity-value"),F=document.querySelector("#click-lasso-initiator"),C=document.querySelector("#reset"),w=document.querySelector("#example-multiple-instances");w.setAttribute("class","active"),w.removeAttribute("href");const x=e(),A=v.map((e=>t({renderer:x,canvas:e,pointSize:3,opacity:.66,lassoInitiator:true})));console.log(`Scatterplot v${A[0].get("version")}`),f.disabled=!0;const L=e=>{S.value=e,E.innerHTML=e,A.forEach((t=>t.set({pointSize:e})))};S.addEventListener("input",(e=>L(+e.target.value))),L(A[0].get("pointSize"));const z=e=>{q.value=e,k.innerHTML=e,A.forEach((t=>t.set({opacity:e})))};q.addEventListener("input",(e=>z(+e.target.value))),z(A[0].get("opacity"));F.addEventListener("change",(e=>{A.forEach((t=>t.set({lassoInitiator:e.target.checked})))})),F.checked=A[0].get("lassoInitiator");C.addEventListener("click",(()=>{A.forEach((e=>e.reset()))}));const T=e=>{A.filter((t=>t!==e)).forEach((e=>{e.deselect({preventEvent:!0})})),u.style.opacity=0,u.style.transform="translate(-50%, -50%) scale(0)"};a.then((e=>o(e))).then((e=>{s.style.display="none",c.textContent="";const t=e.data[0].children.map((e=>e.values)),o=t[t.length-1];b.innerHTML=e.numRows,A.forEach(((e,a)=>{e.draw({x:t[2*a],y:t[2*a+1],z:o}),e.set({colorBy:"z",pointColor:r}),e.subscribe("pointover",(e=>{var t,a;t=n[o[e]],a=r[o[e]],d.style.opacity=1,d.style.background=a,d.textContent=t})),e.subscribe("pointout",p),e.subscribe("view",(({view:t})=>{return o=e,n=t,void A.filter((e=>e!==o)).forEach((e=>{e.view(n,{preventEvent:!0})}));var o,n})),e.subscribe("select",(({points:t})=>((e,t,o)=>{A.filter((t=>t!==e)).forEach((e=>{e.select(t,{preventEvent:!0})}));const n=t[Math.floor(Math.random()*(t.length-1))];y(n,o[n])})(e,t,o))),e.subscribe("deselect",(()=>T(e)))}))})).catch((e=>{l("Could not load embedding... Damn...",!0),console.error(e)}));
