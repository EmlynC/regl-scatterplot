import{c as e}from"./index.522b8f46.js";import{s as t}from"./utils.1dbcb5de.js";import{C as n,G as o}from"./vendor.ad595088.js";const i=document.querySelector("#canvas"),r=document.querySelector("#canvas-wrapper"),a=document.querySelector("#num-points"),l=document.querySelector("#num-points-value"),c=document.querySelector("#point-size"),s=document.querySelector("#point-size-value"),d=document.querySelector("#opacity"),u=document.querySelector("#opacity-value"),v=document.querySelector("#click-lasso-initiator"),m=document.querySelector("#reset"),p=document.querySelector("#export"),y=document.querySelector("#example-text-overlay");y.setAttribute("class","active"),y.removeAttribute("href");const g=document.createElement("div");g.id="note",g.textContent="Zoom in to see labels!",r.appendChild(g);const h=document.createElement("canvas");h.id="#text-overlay",h.style.position="absolute",h.style.top=0,h.style.right=0,h.style.bottom=0,h.style.left=0,h.style.pointerEvents="none",r.appendChild(h);const w=()=>{const{width:e,height:t}=r.getBoundingClientRect();h.width=e*window.devicePixelRatio,h.height=t*window.devicePixelRatio,h.style.width=`${e}px`,h.style.height=`${t}px`};w(),window.addEventListener("resize",w);const S=h.getContext("2d");S.font=12*window.devicePixelRatio+"px sans-serif",S.textAlign="center";let x=[],f=1e4,b=4,q=1,L=[];const E=e({canvas:i,lassoMinDelay:10,lassoMinDist:2,pointSize:b,showReticle:!0,reticleColor:[1,1,.878431373,.33],xScale:n().domain([-1,1]),yScale:n().domain([-1,1]),pointColor:"#fff",opacityBy:"density",lassoInitiator:!0});p.addEventListener("click",(()=>t(E))),console.log(`Scatterplot v${E.get("version")}`),E.subscribe("select",(({points:e})=>{if(console.log("Selected:",e),L=e,1===L.length){const e=x[L[0]];console.log(`X: ${e[0]}\nY: ${e[1]}\nCategory: ${e[2]}\nValue: ${e[3]}`)}})),E.subscribe("deselect",(()=>{L=[]}));E.subscribe("view",(({xScale:e,yScale:t})=>{const n=E.get("pointsInView");n.length<=200?((e,t,n)=>{S.clearRect(0,0,i.width,i.height),S.fillStyle="rgb(255, 255, 255)";for(let o=0;o<e.length;o++)S.fillText(e[o],t(x[e[o]][0])*window.devicePixelRatio,n(x[e[o]][1])*window.devicePixelRatio-12*1.2*window.devicePixelRatio)})(n,e,t):S.clearRect(0,0,i.width,i.height)}));const R=e=>{var t;f=e,a.value=f,l.innerHTML=f,t=f,x=Array.from({length:t},(()=>[2*Math.random()-1,2*Math.random()-1])),E.draw(x)};a.addEventListener("input",(e=>{l.innerHTML=+e.target.value+" <em>release to redraw</em>"}));a.addEventListener("change",(e=>R(+e.target.value)));const C=e=>{const t=o().domain([1,10]).range([e,10*e]);return Array(100).fill().map(((e,n)=>t(1+n/99*9)))},M=e=>{b=e,c.value=b,s.innerHTML=b,E.set({pointSize:C(b)})};c.addEventListener("input",(e=>M(+e.target.value)));const $=e=>{var t;q=e,d.value=q,u.innerHTML=q,E.set({opacity:(t=q,Array(10).fill().map(((e,n)=>(n+1)/10*t)))})};d.addEventListener("input",(e=>$(+e.target.value)));v.addEventListener("change",(e=>{E.set({lassoInitiator:e.target.checked})})),v.checked=E.get("lassoInitiator");m.addEventListener("click",(()=>{E.reset()})),M(b),$(q),R(f);
